(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e,t,n){e.exports=n(386)},233:function(e,t){},356:function(e,t,n){},357:function(e,t,n){},360:function(e,t,n){},386:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),o=n.n(c),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(102);var u=n(392),s=n(395),m=n(389),d=n(390),f=n(397),p=n(398),h=n(8),E=n(388),v=n(387),g=function(e){var t=Object(a.useState)(e.keywords||""),n=Object(h.a)(t,2),c=n[0],o=n[1];return r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:c,onChange:function(e){return o(e.target.value)}}),r.a.createElement(v.a,{to:"/search/".concat(c)},r.a.createElement(E.a,{variant:"primary",size:"sm"},"Search")))},b=n(396),y=function(e){var t=Object(a.useState)([]),n=Object(h.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)(function(){if(e.match&&e.match.params.postId){var t=e.match.params.postId;o(t.split("/"))}else o([])}),r.a.createElement(b.a,null,function(e){var t="/#/wiki",n=e.map(function(e){return{href:t+="/".concat(e),text:e}});return n.unshift({href:"/",text:"Home"}),n.map(function(e){var t=e.href,n=e.text;return r.a.createElement(b.a.Item,{href:t,key:"navbar".concat(t,"}")},n)})}(c))},w=function(e){return r.a.createElement("div",null,r.a.createElement(m.a,null,r.a.createElement(d.a,{xs:12,md:12},r.a.createElement(g,null))),r.a.createElement(m.a,null,r.a.createElement(d.a,{xs:12,md:12},r.a.createElement(f.a,null,r.a.createElement(p.a,{path:"/wiki/:postId+",component:y}),r.a.createElement(p.a,{component:y})))))},k=n(61),x=n(62),O=n(10),j=n.n(O),I=n(63),S={owner:"kenpusney",repo:"wiki",pathprefix:"cnmd"},D=n(157),N=n.n(D)()();N.authenticate({type:"token",token:localStorage.getItem("WIKI_TOKEN")||"undefined"});var A=function(e){var t=e.page,n=e.text;return t=t||"README",n=n||t,r.a.createElement("a",{href:"/#/wiki/".concat(t)},n)},K=function(e){return r.a.createElement("span",{key:e.orig},r.a.createElement("a",{href:"/#/search/".concat(e.orig)},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.wrapped}})),"\xa0")},R=function(e){return r.a.createElement("div",{key:e.result},r.a.createElement("dt",null,r.a.createElement("h4",null,r.a.createElement(A,{page:e.result}))),r.a.createElement("dd",null,"matches: ",e.matched.map(K)))},C=function(e){return r.a.createElement("dl",null,e.result.map(R))},T=new(function(){function e(){var t=this;Object(k.a)(this,e),this.loadData(function(e){t.indexData=JSON.parse(e),t.reverseIndexing(t.indexData)})}return Object(x.a)(e,[{key:"ready",value:function(){return void 0!==this.indexData}},{key:"reverseIndexing",value:function(e){var t={};j.a.keys(e).forEach(function(n){e[n].forEach(function(e){t[e]?t[e].push(n):t[e]=[n]})}),this.reverseIndex=t}},{key:"loadData",value:function(e){var t=S.owner,n=S.repo;N.repos.getContent({owner:t,repo:n,path:"data/indexing.json"}).then(function(t){e(Object(I.atob)(t.data.content))})}},{key:"search",value:function(e){var t=this;e=e.split(/\s+/).filter(function(e){return e});var n=this.indexData||{};return e.map(function(e){return j.a.keys(n).filter(function(t){return t.includes(e)})}).map(function(e){return j.a.uniq(j.a.flatten(j.a.at(n,e)))}).reduce(function(e,t){return e?j.a.intersection(e,t):t}).map(function(n){return t.generateResult(n,e)})}},{key:"generateResult",value:function(e,t){if(this.reverseIndex){var n=this.reverseIndex[e].map(function(e){var n=t.filter(function(t){return e.includes(t)});return{indexKey:e,searchKeys:n}}).map(function(e){return e.searchKeys.map(function(t){return{wrapped:e.indexKey.replace(t,"<b>".concat(t,"</b>")),orig:e.indexKey}})});return{result:e,matched:j.a.uniq(j.a.flatten(n))}}return{result:e,matched:[]}}},{key:"searchAsync",value:function(e,t){var n=this;this.ready()?t(this.search(e)):this.loadData(function(a){n.indexData=JSON.parse(a),n.reverseIndexing(n.indexData),t(n.search(e))})}}]),e}()),H=function(e){var t=Object(a.useState)(""),n=Object(h.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)([]),i=Object(h.a)(l,2),u=i[0],s=i[1];return Object(a.useEffect)(function(){var t=function(e){return e.match&&e.match.params.keyword?e.match.params.keyword:""}(e);""!==t&&c!==t&&(o(t),T.searchAsync(t,s))}),r.a.createElement("div",null,r.a.createElement("h4",null,c?'Search result for "'.concat(c,'"'):"Please input your search keywords"),r.a.createElement(C,{result:u}))},W=n(164),_=n(158),M=n.n(_),P=n(98),B=n(99),q=n.n(B),G=function(){function e(){Object(k.a)(this,e)}return Object(x.a)(e,[{key:"load",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=S.owner,c=S.repo,o=S.pathprefix;N.repos.getContent({owner:r,repo:c,path:"".concat(o,"/").concat(e,".cn.md")}).then(function(e){n.extractData(Object(I.atob)(e.data.content),t)}).catch(function(r){if(a)return n.error(t);console.log(r),n.load("".concat(e,"/README"),t,!0)})}},{key:"extractData",value:function(e,t){var n={},a=e;if(q.a.test(e)){var r=q()(e);n=r.attributes,a=r.body}t({body:a,metadata:n})}},{key:"listDir",value:function(e,t){var n=S.owner,a=S.repo,r=S.pathprefix;console.log(e);var c=e.replace(/(.*\/)*.*/,"$1");N.repos.getContent({owner:n,repo:a,path:"".concat(r,"/").concat(c)}).then(function(e){var n=e.data.map(function(e){var t=e.name,n=e.path,a=e.type;return"file"===a&&(t=t.replace(/\.cn\.md$/,"")),{name:t,path:n=n.replace(new RegExp("^".concat(r,"/")),"").replace(/\.cn\.md$/,""),type:a}});t({parent:c||"Home",children:n})})}},{key:"error",value:function(e){e({metadata:{},body:"**Error when rendering page: ** *Not Available!*"})}}]),e}(),J=function(e){var t=e.refs;return t=t||[],j.a.isEmpty(t)?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement("h4",null,"See Also"),r.a.createElement("ul",null,t.map(function(e){return r.a.createElement("li",{key:e},r.a.createElement(A,{page:e}))})))},L=n(391),$=function(e){var t=e.tags;return t=j.a.uniq(t||[]),j.a.isEmpty(t)?r.a.createElement("div",null):r.a.createElement("div",null,"Tags: \xa0",t.map(function(e){return r.a.createElement("span",{key:e},r.a.createElement(L.a,{variant:"primary"},e),"\xa0")}))};function z(e){var t="README",n=[];return e.match&&e.match.params.postId&&(n=(t=e.match.params.postId).split("/")),{postId:t,items:n}}var F=new G,Q=new P.CnmdRenderer(Object(W.a)({},P.CnmdRenderer.default_handlers,{"":function(e){return e.endsWith("/")?"/#/wiki/".concat(e,"README"):"/#/wiki/".concat(e)}})),U=function(e){var t,n=Object(a.useState)({metadata:{},body:""}),c=Object(h.a)(n,2),o=c[0],l=c[1],i=Object(a.useState)(""),u=Object(h.a)(i,2),s=u[0],m=u[1];return Object(a.useEffect)(function(){var t=z(e);s!==t.postId&&(m(t.postId),F.load(t.postId,l))}),r.a.createElement("div",{className:"Post"},r.a.createElement($,{tags:o.metadata.tags}),r.a.createElement("p",{className:"Post-body",dangerouslySetInnerHTML:{__html:(t=o.body,M()(t,{renderer:Q}))}}),r.a.createElement(J,{refs:o.metadata.refs}))},Y=(n(356),new G),V=function(e){return"".concat(e.name+("dir"===e.type?"/":""))},X=function(e){var t=Object(a.useState)({parent:"Home",children:[]}),n=Object(h.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(""),i=Object(h.a)(l,2),u=i[0],s=i[1];return Object(a.useEffect)(function(){var t=z(e).postId;u!==t&&(s(t),Y.listDir(t,o))}),r.a.createElement("div",{className:"sidebar"},r.a.createElement("hr",null),r.a.createElement("h5",null,"Topics in current category"),c.children.filter(function(e){return"README"!==e.name}).map(function(e){return r.a.createElement("span",{key:e.name},r.a.createElement(L.a,{variant:"secondary"},r.a.createElement(A,{page:(t=e,"".concat(t.path+("dir"===t.type?"/README":""))),text:V(e)}))," \xa0");var t}))},Z=function(e){return r.a.createElement(m.a,null,r.a.createElement(d.a,{xs:12,md:8},r.a.createElement(p.a,{exact:!0,path:"/",component:U}),r.a.createElement(p.a,{exact:!0,path:"/wiki/:postId+",component:U}),r.a.createElement(p.a,{path:"/search/:keyword*",component:H})),r.a.createElement(d.a,{xs:12,md:4},r.a.createElement(p.a,{exact:!0,path:"/",component:X}),r.a.createElement(p.a,{exact:!0,path:"/wiki/:postId+",component:X})))},ee=(n(357),function(e){return r.a.createElement("footer",{style:{margin:"3em 0 1em 0",color:"#777777",fontSize:"0.8em"}},"Powered by ",r.a.createElement("a",{href:"https://github.com/kenpusney/cnmd"},"CNMD")," with \u2661, hosted on GitHub Pages.",r.a.createElement("br",null),r.a.createElement("ul",{className:"footer-nav"},r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(A,{page:"about",text:"About"})),r.a.createElement("li",null,r.a.createElement(A,{page:"contact",text:"Contact"})),r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/kenpusney/wiki/new/gh-pages/cnmd"},"New Page")),r.a.createElement("li",null,r.a.createElement("a",{id:"edit-page",href:"/#"},"Edit Page"))))}),te=function(e){return r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(ee,null)))},ne=n(100),ae=n.n(ne),re=n(159),ce=n(393),oe=n(394),le=n(160),ie=n.n(le),ue=(n(360),function(){var e=Object(re.a)(ae.a.mark(function e(t){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.repos.get(S);case 3:return console.log(t),e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),console.log("failed"),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()),se=function(e){var t=Object(a.useState)(""),n=Object(h.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(!1),i=Object(h.a)(l,2),u=i[0],s=i[1];return Object(a.useEffect)(function(){var e=localStorage.getItem("WIKI_TOKEN");!u&&e&&ue(e).then(function(){s(!0)}).catch(function(){localStorage.clear("WIKI_TOKEN")})}),u?e.children:r.a.createElement(me,{time:1800},r.a.createElement(ce.a.Dialog,null,r.a.createElement(ce.a.Header,{closeButton:!0},r.a.createElement(ce.a.Title,null,"Authentication Required")),r.a.createElement(ce.a.Body,null,r.a.createElement("p",null,"In order to use this wiki, you need to provide an ",r.a.createElement("strong",null,"read only")," GitHub personal access token."),r.a.createElement("p",null,"Please add a token below to continue: "),r.a.createElement(oe.a,{placeholder:"GitHub token","aria-label":"GitHub token","aria-describedby":"github-token",value:c,onChange:function(e){o(e.target.value)}}),r.a.createElement("p",null,r.a.createElement("small",null,"You can find a guide to generate a token in ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line"},"here"),"."))),r.a.createElement(ce.a.Footer,null,r.a.createElement(E.a,{variant:"primary",onClick:function(){return function(e){localStorage.setItem("WIKI_TOKEN",e),N.authenticate({type:"token",token:localStorage.getItem(e)||"undefined"}),window.location.reload()}(c)}},"Save"))))},me=function(e){var t=e.time,n=e.children,c=Object(a.useState)(!1),o=Object(h.a)(c,2),l=o[0],i=o[1];return setTimeout(function(){return i(!0)},t),r.a.createElement("div",null,l?n:r.a.createElement(ie.a,{type:"spinningBubbles",className:"loading-spinner",color:"darkgray"}))};o.a.render(r.a.createElement(function(e){return r.a.createElement(se,null,r.a.createElement(s.a,null,r.a.createElement(u.a,null,r.a.createElement(w,null),r.a.createElement(Z,null),r.a.createElement(te,null))))},null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");l?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):i(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):i(e)})}}()}},[[165,1,2]]]);
//# sourceMappingURL=main.a742c2c1.chunk.js.map